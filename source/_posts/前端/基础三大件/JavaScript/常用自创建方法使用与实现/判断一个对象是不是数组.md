---
title: 判断一个对象是不是数组
date: 2023-07-14 18:02:32
tags:
 - JavaScript
categories:
 - JavaScript
---


# 判断一个对象是不是数组

## 构造函数来判断

通过使用 instanceof 操作符，判断 该属性的原型是否具有 该构造函数


```JavaScript

const obj = [];
const obj1 = {};

console.log(obj instanceof Array);  // true
console.log(obj1 instanceof Array); // false

```

### 问题

因为这个是通过查询原型链，那么如果我们修改了原型链，就会出现判断错误。


```JavaScript

const obj = [];
const obj1 = {};
obj1.__proto__ = obj;

console.log(obj instanceof Array);  // true
console.log(obj1 instanceof Array); // true

```


## Object.prototype.toString 判断

因为数组内部重写了 toString 方法，所以如果我们通过这个方法去调用，可以知道当前属性是否为数组。

```JavaScript


const obj = [];

console.log(Object.prototype.toString.call(obj)); // [object Array]


```

### 问题

对象可以通过定义 Symbol.toStringTag 属性来更改 Object.prototype.toString() 的行为，从而导致意想不到的结果。


```JavaScript

const myDate = new Date();
Object.prototype.toString.call(myDate); // [object Date]

myDate[Symbol.toStringTag] = "myDate";
Object.prototype.toString.call(myDate); // [object myDate]

Date.prototype[Symbol.toStringTag] = "prototype polluted";
Object.prototype.toString.call(new Date()); // [object prototype polluted]


```


## Array.isArray

它不检查值的原型链，也不依赖于它所附加的 Array 构造函数。

```JavaScript

console.log(Array.isArray([1, 3, 5]));
// Expected output: true

```





