---
layout: draft
title: nuxt打包文件hash
date: 2022-01-12 17:56:45
tags:
 - webpack
 - 文件hash
---



#  nuxt 打包文件hash

问题来源

因为项目要读取图片并进行显示，然后，我发现可以在本地运行，但是却在打包之后图片没有显示，仔细一看，人家的打包文件带了hash名，所以你的名字不能命中了



## 为什么需要hash

既然知道了文件名被hash了，那么我们进一步思考，为什么需要进行hash呢，

对文件名进行一个hash，可以说是一个非常机智的一个方法，因为我们为了能够在网络的传输可以快点，所以我们就想了一个办法，那就是使用缓存，说到缓存，那就不得不说强缓存和协商缓存了。

​		强缓存会直接在文件没有过时的时候不用向服务器进行请求，便可以得到资源，可以减少很多网络的传输，

​		协商缓存会在将文件的etag和last-modified发给服务器，服务器通过比对这两个值来判断文件是否被修改，只要文件没有被修改，那么客户端就会使用本地的资源，这样虽然进行了请求，但是却减少了网络的资源传输



知道了强缓存和协商缓存，那么，什么是hash呢？

​		在此之前，我们先思考一个问题，对于一个项目，在你上线了之后，出现了bug，需要进行更改，但是此时对应的文件处于强缓存阶段，那么如何才能判断文件是否被修改了，此时就需要使用hash了，因为对于文件发生了更改，hash的名字也会对应发生改变，然后此时就获取到了新的文件。



说完之后，就是解决 nuxt默认配置的hash了

​		这个其实在 nuxt 官网就已经说完了，我们如果想要取消hash，也只需要将 contenthash:7 改为 name 就会变成名字，而不会携带7位hash了。

```
https://www.nuxtjs.cn/api/configuration-build#filenames
```

