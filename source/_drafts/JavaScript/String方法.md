---
title: String方法
date: 2022-03-14 10:12:55
tags:
 - JavaScript
 - 随笔
categories:
 - JavaScript
 - 随笔
---

#  String 的方法



## replace

​		其实这个方法就是一个替换函数，并没有什么，但是我在一个公众号（Vue中文社区）里面发现，这样的替换的结果居然不是将其替换为', '，而是中间插入，所以这个我想要知道为什么。

```
let price = '123456789'
let priceReg = /(?!^)(?=(\d{3})+$)/g

console.log(price.replace(priceReg, ',')) //123,456,789
```

​		先说结论：

​		所以简单来说，就是 ?= 这个方法可以形成这个效果。这个叫做正则表达式的先行断言和后行断言。

​		这里的这个 ?=p、?!p、?<=p、?<!p 这几个模式，我们可以在正则表达式里面进行学习，简单来说就是 ?=p，就是在p的前面为符合的条件，?!p，就是除了?=p 之外的所有。?<=p，就是p的后面的条件。?<!p，就是除了 ?<=p 的所有。

```
let priceReg = /(?=1)/g

console.log(price.replace(priceReg, ',')) //,123456789
```

​		上面这个知道了。然后我们进行后续的学习 replace 方法。



### 参数：

* 字符串 或者 正则表达式
* 替换成新的字符串 或者 一个函数进行处理

其中，对于新的字符串和函数作为参数，我们可以使用一些特殊变量名

####  新的字符串作为参数：

变量名	代表的值

* $$	插入一个 "$"。
* $&	插入匹配的子串。
* $`	插入当前匹配的子串左边的内容。
* $'	插入当前匹配的子串右边的内容。
* $n	假如第一个参数是 RegExp对象，并且 n 是个小于100的非负整数，那么插入第 n 个括号匹配的字符串。提示：索引是从1开始。如果不存在第 n个分组，那么将会把匹配到到内容替换为字面量。比如不存在第3个分组，就会用“$3”替换匹配到的内容。
* $<Name>	 这里Name 是一个分组名称。如果在正则表达式中并不存在分组（或者没有匹配），这个变量将被处理为空字符串。只有在支持命名分组捕获的浏览器中才能使用。



这里我就简单说前面几个可能会常用的

```
let price = '123145617819'
let priceReg = /1/g
console.log(price.replace(priceReg, '$&,')) //1,231,4561,781,9
```

​		上面有个案例，大概就能理解了。

* 对于 $$ 不用思考，就像是 `\\` 一样，转义 `\` 的。

* $&，代表匹配上的字符串

* $`，就是匹配字符串的左边的内容

  * ```
    let price = '123145617819'
    let priceReg = /\d{3}/g
    
    console.log(price.replace(priceReg, '$`,')) // ,123,123145,123145617,
    123 左侧没有，所以就只有一个 ,
    145 左侧存在123，所以就是 123,
    617 左侧为123145，所以就是 123145,
    819 同上。
    ```

* $'，代表右边内容，意思同上。



#### 函数作为参数

变量名	代表的值

* match	匹配的子串。（对应于上述的$&。）
* p1,p2, ...	假如replace()方法的第一个参数是一个RegExp 对象，则代表第n个括号匹配的字符串。（对应于上述的$1，$2等。）例如，如果是用 /(\a+)(\b+)/ 这个来匹配，p1 就是匹配的 \a+，p2 就是匹配的 \b+。
* offset	匹配到的子字符串在原字符串中的偏移量。（比如，如果原字符串是 'abcd'，匹配到的子字符串是 'bc'，那么这个参数将会是 1）
* string	被匹配的原字符串。
* NamedCaptureGroup	命名捕获组匹配的对象



```
console.log(price.replace(priceReg, () => {
  console.log('1')
}))

首先我们会发现，这个方法在每次匹配都会执行一次。
```

​		对于参数来说，因为参数的第二个是匹配的()，所以我们需要知道正则表达式的()的数量才能完成编写。

​		同时，返回值将替换原来的。

​		注意，此时的返回值将不能使用字符串参数里面的特殊变量了。

